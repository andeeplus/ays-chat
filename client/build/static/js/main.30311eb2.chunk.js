(this["webpackJsonpays-chat-client"]=this["webpackJsonpays-chat-client"]||[]).push([[0],{55:function(e,t,n){e.exports=n(93)},61:function(e,t,n){},90:function(e,t){},93:function(e,t,n){"use strict";n.r(t);var r=n(0),a=n.n(r),o=n(49),c=n.n(o),s=n(22),i=n(24),l=n(2),u=n(1),m=n(12),d=(n(61),n(8)),f=function(){var e=a.a.useState(""),t=Object(d.a)(e,2),n=t[0],r=t[1],o=a.a.useState(""),c=Object(d.a)(o,2),s=c[0],l=c[1];return a.a.createElement(u.Box,{column:!0,alignItems:"center",p:3,justifyContent:"center",width:320,border:"1px solid",borderColor:"gray.2",borderRadius:"3px"},a.a.createElement(u.InputField,{type:"text",placeholder:"Room",value:n,textAlign:"center",boxSizing:"border-box",m:2,onChange:function(e){r(e.target.value)}}),a.a.createElement(u.InputField,{type:"text",placeholder:"Username",value:s,textAlign:"center",boxSizing:"border-box",m:2,onChange:function(e){l(e.target.value)}}),a.a.createElement(i.b,{to:"/".concat(n,"?username=").concat(s)},a.a.createElement(u.Button,{m:2},"Join room")))},x=function(){return a.a.createElement(u.Box,{height:"100vh",width:"100%",justifyContent:"center",alignItems:"center"},a.a.createElement(f,null))},b=n(35),g=n(26),p=n(53),h=n.n(p),E=function(e,t){var n=Object(r.useState)([]),a=Object(d.a)(n,2),o=a[0],c=a[1],s=Object(r.useState)([]),i=Object(d.a)(s,2),l=i[0],u=i[1],m=Object(r.useRef)(t),f=Object(r.useRef)();Object(r.useEffect)((function(){return f.current=h()("https://radio.armyoursampler.com/api",{query:{roomId:e,username:m.current}}),f.current.on("Latest50msg",(function(e){e&&(o.length?c((function(t){return[].concat(Object(g.a)(e),Object(g.a)(t))})):c(e))})),f.current.on("newChatMessage",(function(e){var t=Object(b.a)(Object(b.a)({},e),{},{ownedByCurrentUser:e.senderId===f.current.id});c((function(e){return[].concat(Object(g.a)(e),[t])}))})),f.current.on("newUserConnected",(function(t){u(t[e])})),function(){f.current.disconnect()}}),[e,m]);return{messages:o,sendMessage:function(e){f.current.emit("newChatMessage",{body:e,senderId:f.current.id})},connectedUsers:l}},y=function(e){var t=e.sendMessage,n=a.a.useState(""),r=Object(d.a)(n,2),o=r[0],c=r[1];return a.a.createElement(u.Box,{height:"80px",m:3,css:"textarea{resize:none}",position:"fixed",bottom:0,width:"-webkit-fill-available"},a.a.createElement(u.TextArea,{p:2,boxSizing:"border-box",value:o,onChange:function(e){c(e.target.value)},placeholder:"Write message...",fontSize:"16px"}),a.a.createElement(u.ActionButton,{type:"arrowRight",size:20,position:"absolute",bottom:0,right:0,m:2,onClick:function(){t(o),c("")}},"Send"))},v=n(54);function w(){var e=Object(s.a)(["\n  width: 55%;\n  word-break: break-word;\n"]);return w=function(){return e},e}var j=Object(m.default)(u.Box)(w());j.defaultProps={p:1,width:"55%",borderRadius:"3px"};var O=function(e,t){return e[t-1]&&e[t-1].username===e[t].username},S=function(e,t){return e.ownedByCurrentUser||e.username===t},B=function(){var e=Object(r.useRef)();return Object(r.useEffect)((function(){e.current.scrollIntoView()})),a.a.createElement("div",{ref:e})},C=function(e){var t=e.messages,n=e.username,r=Object(v.a)(e,["messages","username"]);return a.a.createElement(u.Box,Object.assign({column:!0,css:"list-style-type: none;",margin:0,mt:5,p:3,width:"100%",overflow:"scroll",borderTop:"1px solid",borderColor:"gray.2"},r),t.map((function(e,r){return a.a.createElement(j,{alignSelf:S(e,n)?"flex-end":"flex-start",justifyContent:S(e,n)?"flex-end":"flex-start",key:r,bg:S(e,n)?"gray.1":"yellow.0",borderRadius:"3px",mb:3},a.a.createElement(u.Box,{column:!0},a.a.createElement(u.Box,{display:O(t,r)?"none":"flex",alignSelf:S(e,n)?"flex-end":"flex-start",px:1,my:1,borderRadius:"3px",bg:"gray.7",width:"fit-content"},a.a.createElement(u.Text,{textSize:"xs",color:"white",textTransform:"uppercase"},e.username)),a.a.createElement(u.Text,{textAlign:S(e,n)?"end":"start",textSize:"sm"},e.body)))})),a.a.createElement(B,null))},I=function(e){var t=e.connectedUsers,n=e.roomId;return a.a.createElement(u.Box,{column:!0,height:["100px"],bg:"white"},a.a.createElement(u.Heading,{m:3},"Room: ",n),a.a.createElement(u.Box,{column:!0,mx:3,alignItems:"flex-start"},a.a.createElement(u.Text,{textSize:"xs",mr:1},"Connected users:"," "),a.a.createElement(u.Box,null,t.map((function(e){return a.a.createElement(u.Box,{key:e.socketId,px:1,my:1,mr:1,borderRadius:"3px",bg:"gray.7",width:"fit-content"},a.a.createElement(u.Text,{textSize:"xs",textTransform:"uppercase",color:"white"},e.username))})))))},k=function(e){var t=e.match.params.roomId,n=e.location.search.split("?username=")[1],r=E(t,n),o=r.messages,c=r.sendMessage,s=r.connectedUsers;return a.a.createElement(u.Box,{column:!0,maxHeight:"100vh"},a.a.createElement(I,{connectedUsers:s,roomId:t}),a.a.createElement(C,{messages:o,username:n}),a.a.createElement(y,{sendMessage:c}))};function R(){var e=Object(s.a)(["\n  body {\n    margin: 0;\n    height: 100%;\n    margin: 0;\n  }\n\n  body, input, button, a, textarea {\n    font-family: -apple-system, BlinkMacSystemFont, 'Segoe UI', 'Roboto', 'Oxygen',\n      'Ubuntu', 'Cantarell', 'Fira Sans', 'Droid Sans', 'Helvetica Neue',\n      sans-serif;\n  }\n"]);return R=function(){return e},e}var z=Object(m.createGlobalStyle)(R());var U=function(){return a.a.createElement(i.a,null,a.a.createElement(z,null),a.a.createElement(m.ThemeProvider,{theme:u.theme},a.a.createElement(l.c,null,a.a.createElement(l.a,{exact:!0,path:"/",component:x}),a.a.createElement(l.a,{exact:!0,path:"/:roomId",component:k}))))};Boolean("localhost"===window.location.hostname||"[::1]"===window.location.hostname||window.location.hostname.match(/^127(?:\.(?:25[0-5]|2[0-4][0-9]|[01]?[0-9][0-9]?)){3}$/));c.a.render(a.a.createElement(a.a.StrictMode,null,a.a.createElement(U,null)),document.getElementById("root")),"serviceWorker"in navigator&&navigator.serviceWorker.ready.then((function(e){e.unregister()})).catch((function(e){console.error(e.message)}))}},[[55,1,2]]]);
//# sourceMappingURL=main.30311eb2.chunk.js.map